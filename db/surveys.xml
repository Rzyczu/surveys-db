<?xml version="1.0" encoding="utf-8"?>
<!--
- phpMyAdmin XML Dump
- version 5.2.1
- https://www.phpmyadmin.net
-
- Host: 127.0.0.1
- Generation Time: Cze 01, 2024 at 07:40 PM
- Wersja serwera: 10.4.32-MariaDB
- Wersja PHP: 8.2.12
-->

<pma_xml_export version="1.0" xmlns:pma="https://www.phpmyadmin.net/some_doc_url/">
    <!--
    - Structure schemas
    -->
    <pma:structure_schemas>
        <pma:database name="surveys" collation="utf8mb4_general_ci" charset="utf8mb4">
            <pma:table name="answer">
                CREATE TABLE `answer` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `answer_date` timestamp NOT NULL DEFAULT current_timestamp(),
                  `value` varchar(200) NOT NULL,
                  `option_id` int(11) NOT NULL,
                  `filling_questionary_id` int(11) NOT NULL,
                  PRIMARY KEY (`id`),
                  KEY `option_id` (`option_id`),
                  KEY `filling_questionary_id` (`filling_questionary_id`),
                  CONSTRAINT `answer_ibfk_1` FOREIGN KEY (`option_id`) REFERENCES `option` (`id`),
                  CONSTRAINT `answer_ibfk_2` FOREIGN KEY (`filling_questionary_id`) REFERENCES `filling_questionaries` (`id`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="creator">
                CREATE TABLE `creator` (
                  `login` varchar(20) NOT NULL,
                  `password` varchar(30) NOT NULL,
                  `name` varchar(20) NOT NULL,
                  `summary` varchar(20) NOT NULL,
                  PRIMARY KEY (`login`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="filling_questionaries">
                CREATE TABLE `filling_questionaries` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `start_time` timestamp NOT NULL DEFAULT current_timestamp(),
                  `end_time` timestamp NULL DEFAULT NULL,
                  `points` int(11) DEFAULT NULL,
                  `user_login` varchar(20) NOT NULL,
                  `questionary_id` int(11) NOT NULL,
                  PRIMARY KEY (`id`),
                  KEY `questionary_id` (`questionary_id`),
                  KEY `user_login` (`user_login`),
                  CONSTRAINT `filling_questionaries_ibfk_1` FOREIGN KEY (`questionary_id`) REFERENCES `questionary` (`id`),
                  CONSTRAINT `filling_questionaries_ibfk_2` FOREIGN KEY (`user_login`) REFERENCES `user` (`login`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="option">
                CREATE TABLE `option` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `value` varchar(50) DEFAULT NULL,
                  `is_correct` tinyint(1) NOT NULL DEFAULT 0,
                  `is_editable` tinyint(1) NOT NULL DEFAULT 0,
                  `question_id` int(11) NOT NULL,
                  PRIMARY KEY (`id`),
                  KEY `question_id` (`question_id`),
                  CONSTRAINT `option_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `question` (`id`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="question">
                CREATE TABLE `question` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(50) NOT NULL,
                  `description` text DEFAULT NULL,
                  `is_obligatory` tinyint(1) NOT NULL DEFAULT 0,
                  `questionary_id` int(11) NOT NULL,
                  `question_type_name` varchar(20) NOT NULL,
                  PRIMARY KEY (`id`),
                  KEY `questionary_id` (`questionary_id`),
                  KEY `question_type_name` (`question_type_name`),
                  CONSTRAINT `question_ibfk_1` FOREIGN KEY (`questionary_id`) REFERENCES `questionary` (`id`),
                  CONSTRAINT `question_ibfk_2` FOREIGN KEY (`question_type_name`) REFERENCES `question_type` (`name`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="questionary">
                CREATE TABLE `questionary` (
                  `id` int(11) NOT NULL AUTO_INCREMENT,
                  `name` varchar(30) NOT NULL,
                  `description` text DEFAULT NULL,
                  `create_date` timestamp NOT NULL DEFAULT current_timestamp(),
                  `category` varchar(20) DEFAULT NULL,
                  `creator_id` varchar(20) NOT NULL,
                  PRIMARY KEY (`id`),
                  KEY `creatorID` (`creator_id`),
                  CONSTRAINT `questionary_ibfk_1` FOREIGN KEY (`creator_id`) REFERENCES `creator` (`login`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="question_type">
                CREATE TABLE `question_type` (
                  `name` varchar(20) NOT NULL,
                  PRIMARY KEY (`name`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
            <pma:table name="user">
                CREATE TABLE `user` (
                  `login` varchar(20) NOT NULL,
                  `password` varchar(30) NOT NULL,
                  `name` varchar(20) NOT NULL,
                  `summary` varchar(20) NOT NULL,
                  PRIMARY KEY (`login`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
            </pma:table>
        </pma:database>
    </pma:structure_schemas>

    <!--
    - Database: 'surveys'
    -->
    <database name="surveys">
        <!-- Table answer -->
        <!-- Table creator -->
        <!-- Table filling_questionaries -->
        <!-- Table option -->
        <!-- Table question -->
        <!-- Table questionary -->
        <!-- Table question_type -->
        <!-- Table user -->
    </database>
</pma_xml_export>